#!/usr/bin/env bash
set -eufo pipefail

{{- if eq .chezmoi.os "darwin" }}
echo "ğŸ  Setting macOS defaults"

echo "ğŸ“š  Show the ~/Library folder"
chflags nohidden ~/Library

# Screenshots
echo "ğŸ“¸  Store screenshots in subfolder on desktop"
mkdir -p ~/Screenshots
defaults write com.apple.screencapture location ~/Screenshots

echo "ğŸ“¸  Disable shadow in screenshots"
defaults write com.apple.screencapture disable-shadow -bool true

echo "ğŸ“¸  Save screenshots as PNG"
defaults write com.apple.screencapture type -string "png"

# Finder
echo "ğŸ“  Show all filename extensions in Finder"
defaults write NSGlobalDomain AppleShowAllExtensions -bool true

echo "ğŸ“  Show hidden files in Finder"
defaults write com.apple.finder AppleShowAllFiles -bool true

echo "ğŸ“  Show path bar in Finder"
defaults write com.apple.finder ShowPathbar -bool true

echo "ğŸ“  Show status bar in Finder"
defaults write com.apple.finder ShowStatusBar -bool true

echo "ğŸ“  Keep folders on top when sorting by name"
defaults write com.apple.finder _FXSortFoldersFirst -bool true

# Keyboard
echo "âŒ¨ï¸  Set a blazingly fast keyboard repeat rate"
defaults write NSGlobalDomain KeyRepeat -int 1

echo "âŒ¨ï¸  # Set a shorter Delay until key repeat"
defaults write NSGlobalDomain InitialKeyRepeat -int 10

# Trackpad
echo "ğŸ‘†  Enable tap to click"
defaults write com.apple.driver.AppleBluetoothMultitouch.trackpad Clicking -bool true
defaults write NSGlobalDomain com.apple.mouse.tapBehavior -int 1

# System
echo "ğŸ”‹  Show battery percentage in menu bar"
defaults write com.apple.menuextra.battery ShowPercent -bool true

# Dock
echo "ğŸ’ˆ  Automatically hide and show the dock"
defaults write com.apple.dock autohide -bool true
{{ end -}}
